- defaults:
    link:
      create: true
      force: true
    shell:
      stdin: true
      stdout: true
      stderr: true

- clean:
  - '~'
  - '~/.ssh'
  - '~/.gnupg'
  - '~/Library/Application Support/Code/User'

- link:
    ~/.zshrc:
    ~/.zshfunctions: scripts/zsh
    ~/.gitconfig:
    ~/.gitignore:
    ~/.ssh/config: ssh-config
    ~/.gnupg/gpg.conf:
    ~/.Brewfile:
    ~/.starship.toml:
    ~/.vimrc:
    ~/.vim:
    ~/.gnupg/gpg-agent.conf:
    ~/.ideavimrc:
    ~/Library/Application Support/Code/User/settings.json: vscode/settings.json
    ~/Library/Application Support/Code/User/keybindings.json: vscode/keybindings.json
    ~/Library/Application Support/Code/User/snippets: vscode/snippets
    # VS Code's Chrome Debugger doesn't allow for user-scoped `runtimeExecutable` setting
    /Applications/Google Chrome.app/Contents/MacOS/Google Chrome: scripts/bash/open-chromium
    ~/Library/LaunchAgents/:
      glob: true
      path: launch-agents/*

- shell:
    - description: Installing Homebrew
      command: CI=true /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
    - description: Installing packages from Homebrew bundle
      command: brew bundle --global --verbose
    - description: Setting correct permissions for GnuPG directory
      command: chmod -vv u=rwx,go= ~/.gnupg && chmod -vv u=rwx,go= ~/.gnupg/*
    - description: Setting correct permissions for SSH directory
      command: chmod -vv u=rwx,go= ~/.ssh && chmod -vv u=rw,go= ~/.ssh/*
    - description: Initializing git submodules
      command: git submodule update --init --recursive
    - description: Updating dotfiles remote url
      command: git remote set-url origin git@github.com:jarrodldavis/dotfiles.git

- link:
    # ensure this is run after main ~/.zshfunctions link
    ~/.zshfunctions/async: scripts/zsh-async/async.zsh

- vscode:
    - jinsihou.diff-tool
    - vscodevim.vim

- vscode-insiders:
    - jinsihou.diff-tool
    - vscodevim.vim
