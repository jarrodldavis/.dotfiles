- defaults:
    link:
      create: true
      force: true
    shell:
      stdin: true
      stdout: true
      stderr: true

- clean:
  - '~'
  - '~/.ssh'
  - '~/.gnupg'

- link:
    ~/.zshrc:
    ~/.zshfunctions: scripts/zsh
    ~/.gitconfig:
    ~/.gitignore:
    ~/.git-template-dir:
    ~/.ssh/config: ssh-config
    ~/.gnupg/gpg-agent.conf:
    /usr/local/bin/pinentry-auto: scripts/pinentry-auto.sh
    ~/.Brewfile:
    ~/.starship.toml:
    ~/.vimrc:
    ~/.vim:
- link:
    # ensure this is run after main ~/.zshfunctions link
    ~/.zshfunctions/async: scripts/zsh-async/async.zsh

- shell:
    - description: Setting correct permissions for GnuPG directory
      command: chmod -vv u=rwx,go= ~/.gnupg && chmod -vv u=rwx,go= ~/.gnupg/* && gpgconf --kill gpg-agent
    - description: Setting correct permissions for SSH directory
      command: chmod -vv u=rwx,go= ~/.ssh && chmod -vv u=rw,go= ~/.ssh/*
