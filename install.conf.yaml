- defaults:
    shell:
      stdout: true
      stderr: true
      stdin: true
    link:
      create: true
      force: true

- clean: ['~']

- link:
    ~/.bash_profile:
    ~/.gitconfig:
    ~/.gitignore_global:
    ~/.ssh/config: ssh/config
    ~/.gnupg/gpg-agent.conf: gnupg/gpg-agent.conf
    ~/.vimrc:
    ~/Library/LaunchAgents/:
      glob: true
      path: LaunchAgents/*

    ~/Library/Application Support/Code/User/settings.json: vscode/settings.json
    ~/Library/Application Support/Code/User/keybindings.json: vscode/keybindings.json
    ~/Library/Application Support/Code/User/snippets: vscode/snippets

    # VS Code's Chrome Debugger doesn't allow for user-scoped `runtimeExecutable` setting
    /Applications/Google Chrome.app/Contents/MacOS/Google Chrome: scripts/open-chromium

    ~/.dotfiles-scripts: scripts

- brewfile:
    - Brewfile

- shell:
    -
      command: '[ -d ~/.vim/bundle/Vundle.vim/ ] || git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim'
      description: Installing Vundle
    - [vim +PluginInstall +qall, Installing vim plugins]
    -
      command: "cat vim-press-and-hold.txt | xargs -I {} defaults write {} ApplePressAndHoldEnabled -bool false"
      description: Fixing Keyboard Press and Hold for apps with vim plugins
    - ["code $(sed -e 's/^/--force --install-extension /' vscode/extensions.txt)", Installing Visual Studio Code Extensions]
    - ["cat npm-config.txt | xargs -L1 npm config set", "Configuring npm"]
    - ["cat npm-globals.txt | xargs npm i -g", Installing global npm packages]
    - ["cat heroku-plugins.txt | xargs heroku plugins:install", Installing Heroku CLI plugins]
    -
      command: "grep '/usr/local/bin/bash' /etc/shells || echo /usr/local/bin/bash | sudo tee -a /etc/shells"
      description: "Adding Homebrew bash to system shells"
    - ["sudo chsh -s /usr/local/bin/bash $(whoami)", "Setting default shell to Homebrew bash"]
